--- linux-2.6.36/arch/arm/mach-orion5x/dns323-setup.c-orig	2010-11-23 15:13:46.279480577 +0000
+++ linux-2.6.36/arch/arm/mach-orion5x/dns323-setup.c	2010-11-23 15:20:08.403355501 +0000
@@ -253,32 +253,12 @@
  * GPIO LEDs (simple - doesn't use hardware blinking support)
  */
 
-#define ORION_BLINK_HALF_PERIOD 100 /* ms */
-
-static int dns323_gpio_blink_set(unsigned gpio, int state,
-	unsigned long *delay_on, unsigned long *delay_off)
-{
-
-	if (delay_on && delay_off && !*delay_on && !*delay_off)
-		*delay_on = *delay_off = ORION_BLINK_HALF_PERIOD;
-
-	switch(state) {
-	case GPIO_LED_NO_BLINK_LOW:
-	case GPIO_LED_NO_BLINK_HIGH:
-		orion_gpio_set_blink(gpio, 0);
-		gpio_set_value(gpio, state);
-		break;
-	case GPIO_LED_BLINK:
-		orion_gpio_set_blink(gpio, 1);
-	}
-	return 0;
-}
-
 static struct gpio_led dns323ab_leds[] = {
 	{
 		.name = "power:blue",
 		.gpio = DNS323_GPIO_LED_POWER2,
-		.default_trigger = "default-on",
+		.default_trigger = "timer",
+		.active_low = 1,
 	}, {
 		.name = "right:amber",
 		.gpio = DNS323_GPIO_LED_RIGHT_AMBER,
@@ -312,13 +292,11 @@
 static struct gpio_led_platform_data dns323ab_led_data = {
 	.num_leds	= ARRAY_SIZE(dns323ab_leds),
 	.leds		= dns323ab_leds,
-	.gpio_blink_set = dns323_gpio_blink_set,
 };
 
 static struct gpio_led_platform_data dns323c_led_data = {
 	.num_leds	= ARRAY_SIZE(dns323c_leds),
 	.leds		= dns323c_leds,
-	.gpio_blink_set = dns323_gpio_blink_set,
 };
 
 static struct platform_device dns323_gpio_leds = {
@@ -354,6 +332,11 @@
 
 static struct gpio_keys_button dns323c_buttons[] = {
 	{
+		.code		= KEY_RESTART,
+		.gpio		= DNS323_GPIO_KEY_RESET,
+		.desc		= "Reset Button",
+		.active_low	= 1,
+	}, {
 		.code		= KEY_POWER,
 		.gpio		= DNS323C_GPIO_KEY_POWER,
 		.desc		= "Power Button",
@@ -444,7 +427,7 @@
 	{  7, MPP_UNUSED },		/* ? output */
 	{  8, MPP_GPIO },		/* i/o right amber LED */
 	{  9, MPP_GPIO },		/* i/o left amber LED */
-	{ 10, MPP_GPIO },		/* input */
+	{ 10, MPP_GPIO },		/* input reset switch (back button) */
 	{ 11, MPP_UNUSED },
 	{ 12, MPP_SATA_LED },
 	{ 13, MPP_SATA_LED },
